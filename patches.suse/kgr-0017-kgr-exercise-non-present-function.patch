From: Jiri Slaby <jslaby@suse.cz>
Date: Tue, 13 May 2014 17:16:31 +0200
Subject: kgr: exercise non-present function
Patch-mainline: submitted for review
References: fate#313296

This is to test the newly added functionality: non-fatal patching of
yet unknown functions.

Signed-off-by: Jiri Slaby <jslaby@suse.cz>
---
 samples/kgraft/kgraft_patcher.c | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/samples/kgraft/kgraft_patcher.c b/samples/kgraft/kgraft_patcher.c
index 4a7070344f4e..4e3806ecdce5 100644
--- a/samples/kgraft/kgraft_patcher.c
+++ b/samples/kgraft/kgraft_patcher.c
@@ -62,6 +62,11 @@ static bool kgr_new_capable(int cap)
 	return ns_capable(&init_user_ns, cap);
 }
 
+static void kgr_new_function(unsigned long data)
+{
+	pr_info("kgr-patcher: %s\n", __func__);
+}
+
 static struct kgr_patch patch = {
 	.owner = THIS_MODULE,
 	.patches = {
@@ -69,6 +74,7 @@ static struct kgr_patch patch = {
 		KGR_PATCH(SyS_iopl, kgr_new_sys_iopl, true),
 #endif
 		KGR_PATCH(capable, kgr_new_capable, true),
+		KGR_PATCH(unknown_function, kgr_new_function, false),
 		KGR_PATCH_END
 	}
 };
-- 
2.0.0

