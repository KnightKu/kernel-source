From af3d3e161c4f063c2b34dbf829acd7f7066b7e60 Mon Sep 17 00:00:00 2001
From: Joerg Roedel <jroedel@suse.de>
Date: Tue, 13 Mar 2018 15:08:37 +0100
Subject: [PATCH 04/17] x86/mm: Define PUD_PAGE_MASK on 32 bit
References: bsc#1068032 CVE-2017-5754
Patch-mainline: No, different upstream implementation

This is needed for the KAISER code to compile on 32 bit.

Signed-off-by: Joerg Roedel <jroedel@suse.de>
---
 arch/x86/include/asm/page_32_types.h | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/arch/x86/include/asm/page_32_types.h b/arch/x86/include/asm/page_32_types.h
index 88dae6b..954ea40 100644
--- a/arch/x86/include/asm/page_32_types.h
+++ b/arch/x86/include/asm/page_32_types.h
@@ -24,6 +24,9 @@
 #define MCE_STACK 0
 #define N_EXCEPTION_STACKS 1
 
+/* There are no pud_large pages on 32bit, but we need the define for KAISER */
+#define PUD_PAGE_MASK	0
+
 #ifdef CONFIG_X86_PAE
 /* 44=32+12, the limit we can fit into an unsigned long pfn */
 #define __PHYSICAL_MASK_SHIFT	44
-- 
1.8.5.6

