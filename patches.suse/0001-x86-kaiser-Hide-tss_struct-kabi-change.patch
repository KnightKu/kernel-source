From 25ef8cec0e44a01af7f668c336fe17c6b24fc631 Mon Sep 17 00:00:00 2001
From: Joerg Roedel <jroedel@suse.de>
Date: Thu, 12 Apr 2018 11:14:47 +0200
Subject: [PATCH] x86/kaiser: Hide tss_struct kabi change
References: bsc#1068032 CVE-2017-5754
Patch-mainline: No, different upstream implementation

Hide it from the kABI checker, modules should not deal with
the there stack anyway.

Signed-off-by: Joerg Roedel <jroedel@suse.de>
---
 arch/x86/include/asm/processor.h | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/arch/x86/include/asm/processor.h b/arch/x86/include/asm/processor.h
index df6d8eb..e85f172 100644
--- a/arch/x86/include/asm/processor.h
+++ b/arch/x86/include/asm/processor.h
@@ -265,8 +265,10 @@ struct tss_struct {
 #ifndef __GENKSYMS__
 	/* IRQ stacks have to maintain 16-bytes alignment! */
 	u8			pad;
-#endif
 	unsigned long		stack[64] __aligned(256);
+#else
+	unsigned long		stack[64];
+#endif
 
 } __attribute__((__aligned__(PAGE_SIZE)));
 
-- 
2.12.3

