From: Hariprasad S <hariprasad@chelsio.com>
Date: Mon, 8 Dec 2014 15:02:47 +0530
Patch-mainline: v3.19-rc1
Git-commit: e6b11163d41d288a9c5732b85bf6760eb817d3e1
References: bsc#909589
Subject: [PATCH] RDMA/cxgb4: Handle NET_XMIT return codes

cxgb4_create_server() and cxgb4_create_server6() return NET_XMIT_*
values or a negative errno. iw_cxgb4 need to handle this correctly.

Signed-off-by: Hariprasad Shenai <hariprasad@chelsio.com>
Signed-off-by: Roland Dreier <roland@purestorage.com>
Acked-by: John Jolly <jjolly@suse.de>
---
 drivers/infiniband/hw/cxgb4/cm.c |    2 ++
 1 file changed, 2 insertions(+)

--- a/drivers/infiniband/hw/cxgb4/cm.c
+++ b/drivers/infiniband/hw/cxgb4/cm.c
@@ -2780,6 +2780,8 @@ int c4iw_create_listen(struct iw_cm_id *
 			err = c4iw_wait_for_reply(&ep->com.dev->rdev,
 						  &ep->com.wr_wait,
 						  0, 0, __func__);
+		else if (err > 0)
+			err = net_xmit_errno(err);
 	}
 	if (!err) {
 		cm_id->provider_data = ep;
