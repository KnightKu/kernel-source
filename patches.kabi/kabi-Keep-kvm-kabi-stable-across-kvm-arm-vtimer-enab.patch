From 34532e08b631d3de1fb7189e209f465a75495fa2 Mon Sep 17 00:00:00 2001
From: Alexander Graf <agraf@suse.de>
Date: Fri, 16 Sep 2016 10:55:24 +0200
Subject: [PATCH] kabi: Keep kvm kabi stable across kvm arm vtimer enablement
Patch-mainline: no, kabi patches are downstream
References: bsc#999212

The patch "patches.arch/arm64-kvm-Route-vtimer-events-to-user-space.patch"
introduces a new kvm_run exit field which is fully transparent to every user
as it resides inside an anonymous union.

This patch ensures that the kabi checker thinks it's safe too.

Signed-off-by: Alexander Graf <agraf@suse.de>
---
 include/uapi/linux/kvm.h | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/include/uapi/linux/kvm.h b/include/uapi/linux/kvm.h
index c601a4f..7fd3427 100644
--- a/include/uapi/linux/kvm.h
+++ b/include/uapi/linux/kvm.h
@@ -340,9 +340,11 @@ struct kvm_run {
 			__u8 vector;
 		} eoi;
 		/* KVM_EXIT_ARM_TIMER */
+#ifndef __GENKSYMS__
 		struct {
 			__u8 timesource;
 		} arm_timer;
+#endif
 		/* Fix the size of the union. */
 		char padding[256];
 	};
-- 
2.6.6

