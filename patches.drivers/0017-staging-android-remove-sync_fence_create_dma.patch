From 993a21f3cdbb2afa6931f02addb68e07892e77df Mon Sep 17 00:00:00 2001
From: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
Date: Thu, 21 Jan 2016 10:49:24 -0200
Subject: [PATCH 17/88] staging/android: remove sync_fence_create_dma()
Git-commit: d52ef2cef99cc200d828f39d1584e4b190fc2442
Patch-mainline: v4.6-rc1
References: fate#321223

With the removal of struct sync_pt sync_fence_create_dma() now takes
the same arguments as sync_fence_create() so let's keep only
sync_fence_create().

Signed-off-by: Gustavo Padovan <gustavo.padovan@collabora.co.uk>
Reviewed-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Signed-off-by: Patrik Jakobsson <pjakobsson@suse.de>
---
 drivers/staging/android/sync.c |  8 +-------
 drivers/staging/android/sync.h | 10 ----------
 2 files changed, 1 insertion(+), 17 deletions(-)

diff --git a/drivers/staging/android/sync.c b/drivers/staging/android/sync.c
index b9f167ffdff5..5fa4779a1956 100644
--- a/drivers/staging/android/sync.c
+++ b/drivers/staging/android/sync.c
@@ -174,7 +174,7 @@ static void fence_check_cb_func(struct fence *f, struct fence_cb *cb)
 }
 
 /* TODO: implement a create which takes more that one fence */
-struct sync_file *sync_file_create_dma(const char *name, struct fence *fence)
+struct sync_file *sync_file_create(const char *name, struct fence *fence)
 {
 	struct sync_file *sync_file;
 
@@ -196,12 +196,6 @@ struct sync_file *sync_file_create_dma(const char *name, struct fence *fence)
 
 	return sync_file;
 }
-EXPORT_SYMBOL(sync_file_create_dma);
-
-struct sync_file *sync_file_create(const char *name, struct fence *fence)
-{
-	return sync_file_create_dma(name, fence);
-}
 EXPORT_SYMBOL(sync_file_create);
 
 struct sync_file *sync_file_fdget(int fd)
diff --git a/drivers/staging/android/sync.h b/drivers/staging/android/sync.h
index 8cdac1a12e4f..8980b5580fb3 100644
--- a/drivers/staging/android/sync.h
+++ b/drivers/staging/android/sync.h
@@ -185,16 +185,6 @@ struct fence *sync_pt_create(struct sync_timeline *parent, int size);
  */
 struct sync_file *sync_file_create(const char *name, struct fence *fence);
 
-/**
- * sync_file_create_dma() - creates a sync file from dma-fence
- * @name:	name of file to create
- * @pt:	dma-fence to add to the file
- *
- * Creates a sync_file containg @pt.  Once this is called, the fence takes
- * ownership of @pt.
- */
-struct sync_file *sync_file_create_dma(const char *name, struct fence *pt);
-
 /*
  * API for sync_file consumers
  */
-- 
2.12.0
