From: "Rosen, Rami" <rami.rosen@intel.com>
Date: Fri, 2 Sep 2016 14:11:57 +0300
Subject: switchdev: Fix return value of switchdev_port_fdb_dump().
Patch-mainline: v4.9-rc1
Git-commit: dd19bde36739702bbd9a832b5d4995bc0fa8d6d7
References: bsc#1019717 FATE#321698

This patch fixes the retun value of switchdev_port_fdb_dump() when
CONFIG_NET_SWITCHDEV is not set. This avoids getting "warning: return makes
integer from pointer without a cast [-Wint-conversion]" when building
when CONFIG_NET_SWITCHDEV is not set under several compiler versions.
This warning is due to commit d297653dd6f07afbe7e6c702a4bcd7615680002e
("rtnetlink: fdb dump: optimize by saving last interface markers").

Signed-off-by: Rami Rosen <rami.rosen@intel.com>
Acked-by: Roopa Prabhu <roopa@cumulusnetworks.com>
Reported-by: Eric Dumazet <edumazet@google.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: David Chang <dchang@suse.com>
---
 include/net/switchdev.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/include/net/switchdev.h
+++ b/include/net/switchdev.h
@@ -323,7 +323,7 @@ static inline int switchdev_port_fdb_dum
 					  struct net_device *filter_dev,
 					  int *idx)
 {
-       return idx;
+       return *idx;
 }
 
 static inline void switchdev_port_fwd_mark_set(struct net_device *dev,
