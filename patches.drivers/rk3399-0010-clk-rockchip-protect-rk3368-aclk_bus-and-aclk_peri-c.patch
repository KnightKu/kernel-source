From: Jianqun xu <jay.xu@rock-chips.com>
Date: Wed, 2 Dec 2015 21:22:31 +0800
Subject: clk: rockchip: protect rk3368 aclk_bus and aclk_peri clocks
Git-commit: 941c4d3f11c9b591f7762d125b7977ceffb1fa7c
Patch-mainline: v4.5-rc1
References: fate#322003

Add aclk_bus and aclk_peri to the list of rk3368 critical clocks,
which are the base clocks that supply for all peripherals, never
to be disabled automatically.

Signed-off-by: Jianqun xu <jay.xu@rock-chips.com>
Signed-off-by: Heiko Stuebner <heiko@sntech.de>
Signed-off-by: Matthias Brugger <mbrugger@suse.com>
---
 drivers/clk/rockchip/clk-rk3368.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/clk/rockchip/clk-rk3368.c b/drivers/clk/rockchip/clk-rk3368.c
index 1834b6ad6725..4d2e7e56ee68 100644
--- a/drivers/clk/rockchip/clk-rk3368.c
+++ b/drivers/clk/rockchip/clk-rk3368.c
@@ -819,6 +819,8 @@ static struct rockchip_clk_branch rk3368_clk_branches[] __initdata = {
 };
 
 static const char *const rk3368_critical_clocks[] __initconst = {
+	"aclk_bus",
+	"aclk_peri",
 	/*
 	 * pwm1 supplies vdd_logic on a lot of boards, is currently unhandled
 	 * but needs to stay enabled there (including its parents) at all times.
-- 
2.11.0

