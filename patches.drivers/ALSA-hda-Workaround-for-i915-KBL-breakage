From: Takashi Iwai <tiwai@suse.de>
Subject: ALSA: hda - Workaround for i915 KBL breakage
Patch-mainline: Never, a stop-gap for SLE12-SP3/Leap-42.3
References: bsc#1048356,bsc#1047989,bsc#1055272

4.9.x i915 code with drm-kmp seems interefering the HD-audio
communication badly, resulting in the breakage of the analog audio.
Until we find the real culprit, this patch papers over it by disabling
the problematic HDMI/DP audio probe on the machines that have been
reported.

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 sound/pci/hda/hda_intel.c |    4 ++++
 1 file changed, 4 insertions(+)

--- a/sound/pci/hda/hda_intel.c
+++ b/sound/pci/hda/hda_intel.c
@@ -1506,6 +1506,10 @@ static struct snd_pci_quirk probe_mask_l
 	SND_PCI_QUIRK(0x1046, 0x1262, "ASUS W5F", 0x103),
 	/* WinFast VP200 H (Teradici) user reported broken communication */
 	SND_PCI_QUIRK(0x3a21, 0x040d, "WinFast VP200 H", 0x101),
+	/* FIXME: i915 KBL interferes HD-audio controller on Leap 42.3 */
+	SND_PCI_QUIRK(0x1025, 0x1085, "Acer ES15", 0x101),
+	SND_PCI_QUIRK(0x1043, 0x15a0, "ASUS UX310", 0x101),
+	SND_PCI_QUIRK(0x17aa, 0x224b, "Lenovo T470", 0x101),
 	{}
 };
 
