From 020d45aced8ba1678dc36ee8d15fc8cbfc6384d6 Mon Sep 17 00:00:00 2001
From: Vasilis Liaskovitis <vliaskovitis@suse.com>
Date: Mon, 6 Nov 2017 17:56:20 +0100
References: bsc#1064803
Patch-mainline: Never, SUSE-specific
Subject: [PATCH] usb-serial:  check for NULL private data in
 pl2303_suse_disconnect

Acked-by: Oliver Neukum <oneukum@suse.com>
---
 drivers/usb/serial/pl2303.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/usb/serial/pl2303.c b/drivers/usb/serial/pl2303.c
index f86b9b1..65dd7f4 100644
--- a/drivers/usb/serial/pl2303.c
+++ b/drivers/usb/serial/pl2303.c
@@ -866,8 +866,8 @@ static void pl2303_suse_disconnect(struct usb_serial *serial)
 
 	for (i = 0; i < serial->num_ports; ++i) {
 		priv = usb_get_serial_port_data(serial->port[i]);
-
-		wake_up_all(&priv->delta_msr_wait);
+		if (priv != NULL)
+			wake_up_all(&priv->delta_msr_wait);
 	}
 }
 
-- 
1.7.12.4

