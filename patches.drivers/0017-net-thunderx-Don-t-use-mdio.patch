From 1ffe9f20f3eb1d960d4ba1dfa7b743e6e5c0c745 Mon Sep 17 00:00:00 2001
From: Matthias Brugger <mbrugger@suse.com>
Date: Thu, 14 Apr 2016 20:35:44 +0200
Subject: [PATCH 17/60] net: thunderx: Don't use mdio

Patch-mainline: Never, fixes a local compilation error
References: fate#322326

Kernel v4.4 does not have commit
e5a03bfd873c ("phy: Add an mdio_device structure").
This patch fixes a compilation error and we don't have to touch the mailine patch.

Signed-off-by: Matthias Brugger <mbrugger@suse.com>
---
 drivers/net/ethernet/cavium/thunder/thunder_bgx.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/net/ethernet/cavium/thunder/thunder_bgx.c b/drivers/net/ethernet/cavium/thunder/thunder_bgx.c
index febc9382846a..4038d2c65b34 100644
--- a/drivers/net/ethernet/cavium/thunder/thunder_bgx.c
+++ b/drivers/net/ethernet/cavium/thunder/thunder_bgx.c
@@ -1052,7 +1052,7 @@ defer:
 	 */
 	while (lmac) {
 		if (bgx->lmac[lmac].phydev) {
-			put_device(&bgx->lmac[lmac].phydev->mdio.dev);
+			put_device(&bgx->lmac[lmac].phydev->dev);
 			bgx->lmac[lmac].phydev = NULL;
 		}
 		lmac--;
-- 
2.11.0

