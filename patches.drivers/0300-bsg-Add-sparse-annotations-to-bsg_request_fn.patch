From: Bart Van Assche <bart.vanassche@sandisk.com>
Date: Sun, 25 Sep 2016 19:54:38 -0700
Subject: bsg: Add sparse annotations to bsg_request_fn()
References: bsc#1020989,FATE#322379
Git-commit: dbb3ab03563cbf0880b1801a238b3e3964e364a1
Patch-Mainline: v4.10-rc1

Avoid that sparse complains about unbalanced lock actions.

Signed-off-by: Bart Van Assche <bart.vanassche@sandisk.com>
Signed-off-by: Jens Axboe <axboe@fb.com>
Signed-off-by: Hannes Reinecke <hare@suse.de>
---
 block/bsg-lib.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/block/bsg-lib.c b/block/bsg-lib.c
index 650f427..b2a61e3 100644
--- a/block/bsg-lib.c
+++ b/block/bsg-lib.c
@@ -161,6 +161,8 @@ failjob_rls_job:
  * Drivers/subsys should pass this to the queue init function.
  */
 void bsg_request_fn(struct request_queue *q)
+	__releases(q->queue_lock)
+	__acquires(q->queue_lock)
 {
 	struct device *dev = q->queuedata;
 	struct request *req;
-- 
1.8.5.6

