From f08b52ab47069e83caa8746a7e99571fca1dc6ff Mon Sep 17 00:00:00 2001
From: Ulf Hansson <ulf.hansson@linaro.org>
Date: Thu, 5 Nov 2015 16:01:33 +0100
Subject: [PATCH 02/17] mmc: core: Remove MMC_CAP_RUNTIME_RESUME as it's
 redundant

Git-commit: 7b6471a968bf95e8d526393de125df3bc0c6a73a
Patch-mainline: v4.5-rc1
References: fate#321995

Signed-off-by: Ulf Hansson <ulf.hansson@linaro.org>
Signed-off-by: Mian Yousaf Kaukab <yousaf.kaukab@suse.com>
---
 drivers/mmc/host/dw_mmc-rockchip.c | 8 ++++----
 drivers/mmc/host/mtk-sd.c          | 1 -
 include/linux/mmc/host.h           | 1 -
 3 files changed, 4 insertions(+), 6 deletions(-)

diff --git a/drivers/mmc/host/dw_mmc-rockchip.c b/drivers/mmc/host/dw_mmc-rockchip.c
index 04832719cd57..fec837557cc5 100644
--- a/drivers/mmc/host/dw_mmc-rockchip.c
+++ b/drivers/mmc/host/dw_mmc-rockchip.c
@@ -296,10 +296,10 @@ static int dw_mci_rockchip_init(struct dw_mci *host)
 
 /* Common capabilities of RK3288 SoC */
 static unsigned long dw_mci_rk3288_dwmmc_caps[4] = {
-	MMC_CAP_RUNTIME_RESUME | MMC_CAP_CMD23, /* emmc */
-	MMC_CAP_RUNTIME_RESUME | MMC_CAP_CMD23, /* sdmmc */
-	MMC_CAP_RUNTIME_RESUME | MMC_CAP_CMD23, /* sdio0 */
-	MMC_CAP_RUNTIME_RESUME | MMC_CAP_CMD23, /* sdio1 */
+	MMC_CAP_CMD23, /* emmc */
+	MMC_CAP_CMD23, /* sdmmc */
+	MMC_CAP_CMD23, /* sdio0 */
+	MMC_CAP_CMD23, /* sdio1 */
 };
 static const struct dw_mci_drv_data rk2928_drv_data = {
 	.init			= dw_mci_rockchip_init,
diff --git a/drivers/mmc/host/mtk-sd.c b/drivers/mmc/host/mtk-sd.c
index 33dfd7e72516..a5beb3618240 100644
--- a/drivers/mmc/host/mtk-sd.c
+++ b/drivers/mmc/host/mtk-sd.c
@@ -1543,7 +1543,6 @@ static int msdc_drv_probe(struct platform_device *pdev)
 	mmc->f_min = host->src_clk_freq / (4 * 255);
 
 	mmc->caps |= MMC_CAP_ERASE | MMC_CAP_CMD23;
-	mmc->caps |= MMC_CAP_RUNTIME_RESUME;
 	/* MMC core transfer sizes tunable parameters */
 	mmc->max_segs = MAX_BD_NUM;
 	mmc->max_seg_size = BDMA_DESC_BUFLEN;
diff --git a/include/linux/mmc/host.h b/include/linux/mmc/host.h
index 67fee62a8a37..ae0f28cdb3ca 100644
--- a/include/linux/mmc/host.h
+++ b/include/linux/mmc/host.h
@@ -265,7 +265,6 @@ struct mmc_host {
 #define MMC_CAP_UHS_SDR50	(1 << 17)	/* Host supports UHS SDR50 mode */
 #define MMC_CAP_UHS_SDR104	(1 << 18)	/* Host supports UHS SDR104 mode */
 #define MMC_CAP_UHS_DDR50	(1 << 19)	/* Host supports UHS DDR50 mode */
-#define MMC_CAP_RUNTIME_RESUME	(1 << 20)	/* Resume at runtime_resume. */
 #define MMC_CAP_DRIVER_TYPE_A	(1 << 23)	/* Host supports Driver Type A */
 #define MMC_CAP_DRIVER_TYPE_C	(1 << 24)	/* Host supports Driver Type C */
 #define MMC_CAP_DRIVER_TYPE_D	(1 << 25)	/* Host supports Driver Type D */
-- 
2.11.0

